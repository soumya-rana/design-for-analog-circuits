Version 4
SHEET 1 1432 680
WIRE 432 -32 400 -32
WIRE -32 -16 -96 -16
WIRE 368 -16 160 -16
WIRE 160 0 160 -16
WIRE 496 0 496 -48
WIRE 496 0 432 0
WIRE 528 0 496 0
WIRE 656 0 592 0
WIRE 704 0 656 0
WIRE 800 0 768 0
WIRE 368 16 336 16
WIRE -96 32 -96 -16
WIRE 432 32 400 32
WIRE 800 48 800 0
WIRE 656 64 656 0
WIRE 224 80 160 80
WIRE 336 80 336 16
WIRE 336 80 304 80
WIRE 368 80 336 80
WIRE 496 80 496 0
WIRE 496 80 400 80
WIRE 368 112 368 80
WIRE 400 112 400 80
WIRE -96 144 -96 112
WIRE -96 144 -144 144
WIRE -96 160 -96 144
WIRE 368 208 368 176
WIRE 368 208 304 208
WIRE 400 208 400 176
WIRE 464 208 400 208
WIRE 528 208 464 208
WIRE 656 208 656 128
WIRE 656 208 608 208
WIRE 400 240 368 240
WIRE 464 256 464 208
WIRE 464 256 432 256
WIRE 800 256 800 128
WIRE 864 256 800 256
WIRE 304 272 304 208
WIRE 368 272 304 272
WIRE -96 288 -96 240
WIRE -32 288 -96 288
WIRE 464 288 432 288
WIRE 800 288 800 256
WIRE 800 288 720 288
WIRE 400 304 368 304
WIRE 800 320 800 288
WIRE 464 336 464 288
WIRE 720 336 720 288
WIRE 160 448 160 80
WIRE 464 448 464 416
WIRE 656 448 656 208
WIRE 720 448 720 400
WIRE 800 448 800 400
FLAG -144 144 0
FLAG -32 -16 Vdd
IOPIN -32 -16 Out
FLAG -32 288 Vss
IOPIN -32 288 Out
FLAG 432 32 Vdd
IOPIN 432 32 Out
FLAG 432 -32 Vss
IOPIN 432 -32 Out
FLAG 496 -48 Vo
FLAG 368 240 Vdd
IOPIN 368 240 Out
FLAG 368 304 Vss
IOPIN 368 304 Out
FLAG 656 448 0
FLAG 720 448 0
FLAG 800 448 0
FLAG 160 448 0
FLAG 864 256 Vc
FLAG 464 448 0
FLAG 160 -16 Vi
SYMBOL voltage -96 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL voltage -96 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 10
SYMBOL OpAmps\\LT1097 400 64 M180
WINDOW 0 -59 63 Left 2
WINDOW 3 -50 18 Left 2
SYMATTR InstName U1
SYMBOL res 320 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 5k
SYMBOL ZX1 416 160 R270
SYMATTR InstName X1
SYMBOL voltage 160 -16 R0
WINDOW 3 -101 -81 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 10m 500)
SYMATTR InstName Vi
SYMBOL OpAmps\\LT1097 400 208 M0
WINDOW 0 -59 63 Left 2
WINDOW 3 -50 18 Left 2
SYMATTR InstName U2
SYMBOL cap 592 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res 624 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 5k
SYMBOL res 784 32 R0
SYMATTR InstName R3
SYMATTR Value 20k
SYMBOL res 784 304 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL cap 704 336 R0
SYMATTR InstName C2
SYMATTR Value 220n
SYMBOL diode 672 128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 704 16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL voltage 464 320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vc_dash
SYMATTR Value 0.5
TEXT 56 -136 Left 2 !.tran 0 1 0.8 10u
TEXT 856 -168 Left 2 !.meas TRAN Vo_mag PP V(Vo)/2 FROM 0ms TO 50ms
TEXT 856 -144 Left 2 !.meas TRAN Vc_mag AVG V(Vc) FROM 0ms TO 50ms
TEXT 856 -120 Left 2 !.meas TRAN gain PARAM Vo_mag/0.01 FROM 0ms TO 50ms
